%\VignetteIndexEntry{Test_choice}

\documentclass[10pt, a4paper, landscape]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{stackengine}
\usepackage[margin=2in]{geometry}
\tikzcdset{scale cd/.style={every label/.append style={scale=#1},
		cells={nodes={scale=#1}}},
	every arrow/.append style={line width=0.1}}
\parindent=0pt
\pagenumbering{gobble}
\begin{document}
\begin{center}
\section*{Test choice tree}
\end{center}


This graphic below describes the test choice algorithm employed in the \texttt{DescrTab2} package. Some of the branching steps are dependent on the data and some can be manipulated by the user. The type of data (\texttt{numeric},  \texttt{ordered} factor and unordered \texttt{factor}) is automatically determined, as is the number of groups and the number of categories in categorical variables. The user may choose to apply nonparametric instead of parametric tests, asymptotic instead of exact and paired instead of unpaired tests.

The default argument is \texttt{test\_options=list(paired=F, nonparametric=F, exact=F)}. In a scenario with 2 groups, this will give produce Student's t-test for numerical variables and Boschloo's test for categorical variables with 2 categories.

Test choices can be manually overwritten. E.g. if you want to calculate a Chi-squared test only for the gender variable and use Boschlo's test (default) for everything else, you can request this by supplying the following argument: \\
\texttt{var\_options=list(gender=list(test="Pearsons chi-squared test"))}.

\vspace{1.5cm}


\hspace{-5cm}
\begin{tikzcd}[scale cd=0.35, sep=10pt]
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZADgBoAGAXVJADcBDAGwFcYkQAdDnGADxwBGAM2Bce-YAHUAFlgDG0gAQ84ORVjiKFmGGEVCIAJ2XSYihoaz0BjMwF9FYvjhfALdpxID8duyDuk6Ji4+IQoAOykAIzUdEys7J6CIknAAML0PADmRvJMvv6BIBjYeAREAJzRsQwsbIic3M7Cok0SAHLMALYwlnL5fgFBpaFEZABMNfH1jeLJrXPAAPKGUFhgA4XDIeUoACykkzS1CQ1JLantEF3rm0PFwWVhyADMpC9TdYlt86kAgnAAJ5dNA4CB4OQFe4lHbPACs70+p1mzRSP2AAFFePQ5DgoUUYU8iAcAGxImapLE4tQAWTk7RgXXohk0KjxWweI12yEie3J3zmF3RAAV6FhDDAoPjtkSUFU+cdpgLUQtnMAAJJgWBoXSwMB4wYEx6jCKkOH8s7o8aKLKGCDMNBwQ0yk3IElmi2NLIwACOjnRLxtdodTo5hNdZHNiq+lsWUSD9rQzs5sKIUXIHujyK43p9qUUgdtidD0ON3MiZKzFPRkiwjDkEF4BGUAHcIABaOD0EG2RTYLJgSXtwz0MAAa2U8HZpa5z3dlbiMZREgAYpZJUy9Gzk+HuVUo4vs1aEyGd2XnlUFydq4saaOwO2ZLhB4DFABVSeqM+ztMZq9K2M1QAaUMZg4DHJhHyYRgNEUAgYHbFt6FfP52iWAA1P5v1TFAonGQ5PXONFFi4VQcQgsBtEMdICDwMBmHtJ1gFHKBFEgQwmUYRhXzWVRLAEZgeClaUU1lZAoiiUgFUPG8VVSUVxUlETd2eKIDmk69lX4IVFk1bVdV0A0w3PNN8IPTTLVzf1FkLYNHWwsSojecyAOXHBgHjIsHQc101MzGStPc60vPs4yf1whEXKXHNfWstVbOLHzuTw0h-2i9FSJwcjRyo4AaSwXhJUULpoBgRhFFQjC-lIOxgDgZgBAAKxgXFFHVAARRR6E0EctWuRQYCEIQWqMmccPEt40qPRYAGUcGYPUcE0eDO27NBexwdttzC8aogRKbZNXLap0UAAKSrMIASiS558I01yiNVCQFIlYSdrEt57vSwViLVPSYB1LVDOUkz9ikwifh0tUXqUm6iARL7prk9F-sBxaQfC5ADiipGJHGXhrSymwYDhlBIohxZ8cJ6xbFJ5B9optUACFMAURgIEwT9pyNTHnMZiQgN4AAZZQaZJ97XUm-n3OFGBmTgAhNDSWROx9ZhmSK7axsc-yLLc4AqdF4m6YzHHDvczLsso6QjGAIDFAlHU8CeTReEUEWAHE7NZMWauAARbkMV8JTgDAwDgEm6ckg7Ary+lGXlrmTdS6WaIUXr4EUABFJOJe5MzU6iYWjdpvPbpTqtY+VrBVfV16bQ5qBBzgOB2wgIR2yEXBc+13zJLN2Pgu9qPo9TuaFsMzQ0DFevNq1nndtJVPLbkCjcvHxbWTbVaezMOepz92AhHoZhGBwRBFGYQc1aYcxmSsSj4Ax8ayBjwCJFretG2bFau13vssADiHL1CcWtYiSm9AgFAoAhB2i6EgDMIAwRIEkiARg1gyrClBiAdY2BYAgEru-Fw7kNAADpj64iMKdCwl0AC8tCAAqyZYHXAQTQZBiB8IBSIa4Mh9Eeh9GocyOhjC-A0HQQITB2DcFYHwfcFh8DECoI4W8NBGDGBYPCjg8Osi2CELcrwuApCjCwFekIwwIimEcgUSg9hEAkAHG4QYkhRiTG9ElOYkRK4xFqMkRo6ROi5FFBsYgRxHCEROKSK4Pg1J6HeIIb4qRWiZFBJgXAhxdikDukSf45JgS9GRJ+NE7EuJ6FWPkekzhmTECqL1lE9ykAwDTxHD0HAfQyk+IkUknC2i8FsAqawmp1SyCFLmK4aeikoAdISV03JPSUn9OCZU1RHCqg5M0fM-JCS6lFPchM16cTmGVJGRw9MAzFEnPsUoqI5ykBrNOS8W5iB7lXLwk8rhpy1mzI2bKXpujtkPV2cARpzTuwwDafIQ51jKkSWqXtJ5URsmnPCAilZrziAIsQacvYCKXlIHGIgnZYy9kz0lNM8R6ifkmj+akkAISoh4s4agolzhxmkqmbQ+JFK-FUt2DSxZaTBnjDRfilFSyhUfKueMEk7yIkcPGBi8ViiCXVPGOMd5yipWPKVfizV+KcU6qZaquETykVXJeKg75AS+kAu+qyklkzpmmuqS8LhVq8k2v0fU4A+yyWcqOYMi1LrtWCsUa6l1BrQ1IBeGa6NYqo01KxeamVhq5XmsQe6zZnrRn2p9eyqFTyXiXIceQQtjK9g3MNeMRlLwKhPLTfir5lLrX-K9UC31HLymGpeCKxA8a6XLLCeak13ak0OPVYavYkqHEhoHYMxliL3ljtCZGudii9hDocSOhN4xN2hJTTumtiqE0pSQVcvYKLKB2CAA
                                                                                  &                            &                                               &                                                                                                                     &                                                                                                                 &                                                                                                                &                                &                                                                                                                                           & \textbf{\text{Which test is chosen for the variable } \texttt{var}\text{?}} \arrow[ld, "\texttt{is.factor(var)==T}" description] \arrow[rd, "\texttt{is.numeric(var)==T}" description] &                                                                                                                                     &                                     &                                             &                                                                                                                                                                 &                                   &                                                                                &                                \\
                                                                                  &                            &                                               &                                                                                                                     &                                                                                                                 &                                                                                                                &                                & \textbf{\text{Categorical}} \arrow[rd, "\texttt{is.ordered(var)==T}" description] \arrow[llld, "\texttt{is.ordered(var)==F}" description] &                                                                                                                                                                                        & \textbf{\text{Numerical}} \arrow[ld, "\texttt{nonparametric==T}" description] \arrow[rrrd, "\texttt{nonparametric==F}" description] &                                     &                                             &                                                                                                                                                                 &                                   &                                                                                &                                \\
                                                                                  &                            &                                               &                                                                                                                     & \textbf{\text{Nominal}} \arrow[ld, "\texttt{exact==F}" description] \arrow[rd, "\texttt{exact==T}" description] &                                                                                                                &                                &                                                                                                                                           & \textbf{\text{Ordinal}} \arrow[ldd, "\texttt{paired==T}" description] \arrow[rdd, "\texttt{paired==F}" description]                                                                    &                                                                                                                                     &                                     &                                             & \textbf{\text{\stackanchor{Continuous}{and normally distributed}}} \arrow[ldd, "\texttt{paired==T}" description] \arrow[rrdd, "\texttt{paired==F}" description] &                                   &                                                                                &                                \\
                                                                                  &                            &                                               & \textbf{\text{Asymptotic}} \arrow[d, "\texttt{paired==F}" description] \arrow[ld, "\texttt{paired==T}" description] &                                                                                                                 & \textbf{\text{Exact}} \arrow[ld, "\texttt{paired==T}" description] \arrow[d, "\texttt{paired==F}" description] &                                &                                                                                                                                           &                                                                                                                                                                                        &                                                                                                                                     &                                     &                                             &                                                                                                                                                                 &                                   &                                                                                &                                \\
                                                                                  &                            & \textbf{\text{Paired}} \arrow[lld] \arrow[ld] & \textbf{\text{Independent}} \arrow[d] \arrow[ld]                                                                    & \textbf{\text{Paired}} \arrow[d]                                                                                & \textbf{\text{Independent}} \arrow[d]                                                                          &                                & \textbf{\text{Paired}} \arrow[d] \arrow[ld]                                                                                               &                                                                                                                                                                                        & \textbf{\text{Independent}} \arrow[rd] \arrow[ld] \arrow[d]                                                                         &                                     & \textbf{\text{Paired}} \arrow[rd] \arrow[d] &                                                                                                                                                                 &                                   & \textbf{\text{Independent}} \arrow[ld] \arrow[d] \arrow[rd]                    &                                \\
{\text{\stackanchor{K repetitions x L Groups table,}{binary response}}} \arrow[d] & \text{2x2 table} \arrow[d] & \text{1xL table} \arrow[d]                    & \text{KxL table} \arrow[d]                                                                                          & \text{2x2 table} \arrow[d]                                                                                      & \text{2x2 table} \arrow[d]                                                                                     & \geq \text{3 groups} \arrow[d] & \text{2 groups} \arrow[d]                                                                                                                 & \text{1 group} \arrow[d]                                                                                                                                                               & \text{2 groups} \arrow[d]                                                                                                           & \geq\text{ 3 groups} \arrow[d]      & \text{2 groups} \arrow[d]                   & \geq \text{3 groups} \arrow[d]                                                                                                                                  & \text{1 group} \arrow[d]          & \text{2 groups} \arrow[d]                                                      & \geq \text{3 groups} \arrow[d] \\
\text{Cochranes Q test}                                                           & \text{McNemars test}       & \text{Chi-squared goodness-of-fit test}       & \text{Pearsons Chi-squared test}                                                                                    & \text{Exact McNemars test}                                                                                      & \text{Boschloos test}                                                                                          & \text{Friedman test}           & \text{Wilcoxon two-sample signed-rank test}                                                                                               & \text{Wilcoxon one-sample signed-rank test}                                                                                                                                            & \text{Mann-Whitney U test}                                                                                                          & \text{Kruskal-Wallis one-way ANOVA} & \text{Students paired t-test}               & {\text{\stackanchor{Mixed model ANOVA,}{subject ID as random effect}}}                                                                                          & \text{Students one-sample t-test} & {\text{\stackanchor{Students two-sample t-test,}{default: unequal variances}}} & \text{F-test (ANOVA)}
\end{tikzcd}
\end{document}
